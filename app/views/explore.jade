extends layout

mixin pager(projects, prevPage, nextPage)
  ul.pager
    li(class='previous' + (prevPage ? '' : ' disabled'))
      a(href=prevPage)
        i(class='glyphicon glyphicon-arrow-left')
        = ' Newer'
    li(class='next' + (nextPage ? '' : ' disabled'))
      a(href=nextPage)
        = 'Older '
        i(class='glyphicon glyphicon-arrow-right')

block content
  .container
    +pager(projects, prevPage, nextPage)

    - for (var i = 0; i < projects.length; i += 3) {
      .row
        - for (var j = 0; j < 3 && i + j < projects.length; j++) {
          .col-md-4
            .thumbnail.thumb.explore-thumb
              p = projects[i + j]
              c = p.commit
                p.top
                  | <a href='/#{p.username}'>#{p.username}</a> /
                  | <a href='/#{p.username}/#{p.location}'>#{p.location}</a>
                .inner
                  if c.thumbs[0]
                    a(href='/#{p.username}/#{p.location}/pdf')
                      img(src='#{storeUrl(c.thumbs[0])}',
                          alt="#{p.username} #{p.location}",
                          data-thumbs='#{c.thumbs.join(" ")}')
                  else
                    p Invalid commit.
        - }
    - }

    +pager(projects, prevPage, nextPage)

block scripts
  script(src='/s/js/thumbs.js')